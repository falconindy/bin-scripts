#!/bin/bash
# list directory permissions along the path

target="${1:-$(pwd)}"

if [[ ! -e $target ]]; then
  echo "${0##*/}: cannot stat \`$target': No such file or directory"
  exit 1
fi

IFS='/' read -r -a dirpath <<< "$target"

for part in "${dirpath[@]}"; do
  working+="$part/"
  stat $working --printf "%A %U %G %n\n"
done | column -t
