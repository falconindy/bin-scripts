#!/bin/bash

CC="gcc -std=c99 -pipe -Wall -pedantic"
CFLAGS="-O2"
SRC=/tmp/tmp$$.c
OUT=/tmp/tmp$$

trap_exit() {
  [[ -f "$OUT" ]] && rm -f "$OUT"
  [[ -f "$SRC" ]] && rm -f "$SRC"
}

trap 'trap_exit' 0 TERM HUP QUIT INT ERR

cat > "$SRC" << EOF
#include <stdio.h>
#include <stdlib.h>

int main(void) {
  $@
  return 0;
}
EOF

$CC $CFLAGS $SRC -o "$OUT" && "$OUT"

